Database.js local no wampserver
const { Pool } = require('pg');
const mysql = require('mysql2');

let db;

// Se existir a vari치vel DATABASE_URL (Vercel/Neon), ele usa Postgres
if (process.env.DATABASE_URL) {
    const pool = new Pool({
        connectionString: process.env.DATABASE_URL,
        ssl: { rejectUnauthorized: false } // Obrigat칩rio para o Neon
    });

    db = {
        query: (sql, params, callback) => {
            // Converte o "?" do seu c칩digo MySQL para o "$1, $2" do Postgres
            let i = 1;
            const pgSql = sql.replace(/\?/g, () => `$${i++}`);
            
            pool.query(pgSql, params, (err, res) => {
                if (err) return callback(err);
                // O Postgres retorna os dados em .rows, o MySQL direto no resultado
                callback(null, res.rows); 
            });
        }
    };
    console.log("Conectado ao Neon (Nuvem)");
} else {
    // Caso contr치rio, usa o seu WampServer local (MySQL)
    db = mysql.createConnection({
        host: 'localhost',
        user: 'root',
        password: 'root',
        database: 'todolist_db'
    });
    console.log("Conectado ao WampServer (Local)");
}

module.exports = db;